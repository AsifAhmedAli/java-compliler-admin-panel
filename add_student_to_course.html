

  <div class="col-12">
    <form id="add_student_to_course_form">
        <div class="mb-3">
          <div class="form-group">
            <label for="sel1">Student Name:</label>
            <select class="form-control" id="sel1">
              <option selected>Select Student</option>
            </select>
          </div>
          </div>
        <div class="mb-3">
          <label for="sel12" class="form-label">Course</label>
          <select class="form-control" id="sel12">
            <option selected> Select Course</option>
          </select>
        </div>
        <!-- <div class="mb-3">
          <label for="exampleInputPassword1" class="form-label">Password</label>
          <input type="password" name="password" class="form-control" id="exampleInputPassword1">
        </div> -->
        <!-- <div class="mb-3">
            <label for="disabledSelect" class="form-label">Course</label>
            <select id="disabledSelect" class="form-control">
              <option selected>Select Course</option>
            </select>
          </div> -->
        <button type="submit" class="btn btn-primary">Add</button>
      </form>
 </div>
 



 <script>
   
         var request;

$("#add_student_to_course_form").submit(function (event) {
// alert(document.getElementById("imagesuploadform").value);
    // Prevent default posting of form - put here to work in case of errors
    event.preventDefault();

    // Abort any pending request
    if (request) {
        request.abort();
    }
    // setup some local variables
    // var formData = new FormData(this);
    var student = $("#sel1").val();
    var course = $("#sel12").val();
    // var pass = $("#exampleInputPassword1").val();
    
    // var dateFormat= new Date();
    // formData.append("sender_id", user_ida);
    // msgarea
    // var messaga = document.getElementById("msgarea").value;
    // console.log(formData)
    document.getElementById("loader1").style.visibility = "visible";
    var data = JSON.stringify({
      student: student, course:course
  })
  // console.log(student);
  // console.log(course);
    $.ajax({
        type: "post",
        data: data,
        contentType: "application/json",
        url: `${baseurl}/add-student-to-course`,
        success: function (result) {
          Swal.fire({
                                  icon: 'success',
                                  title: 'Successful!',
                                  text: result.msg,
                                  allowOutsideClick: false
                                })
                                $( 'button.swal2-confirm' ).click(function() {
                                  location.reload();
                                });
            document.getElementById("loader1").style.visibility = "hidden";
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) { 
          var msg = JSON.parse( XMLHttpRequest.responseText);
          Swal.fire({
                                  icon: 'error',
                                  title: 'Failed!',
                                  text: msg.message,
                                })

          document.getElementById("loader1").style.visibility = "hidden";
        // alert("Status: " + textStatus); alert("Error: " + errorThrown); 
    },
    });
});


var i = 0;
   $.ajax({
        type: "get",
        contentType: "application/json",
        url: `${baseurl}/get-courses-whole-list`,
        success: function (result) {
          // console.log(result)
          
          result.forEach(element => {
            document.getElementById("sel12").innerHTML += ` <option value = "${element.id}">${element.cname}</option>`;
          });
          
            document.getElementById("loader1").style.visibility = "hidden";
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) { 
          var msg = JSON.parse( XMLHttpRequest.responseText);
          document.getElementById("loader1").style.visibility = "hidden";
        // alert("Status: " + textStatus); alert("Error: " + errorThrown); 
    },
    });

    $.ajax({
        type: "get",
        contentType: "application/json",
        url: `${baseurl}/get-students-whole-list`,
        success: function (result) {
          // console.log(result)
          // created_at
          result.forEach(element => {
      document.getElementById("sel1").innerHTML += ` <option value = "${element.id}">${element.sname} [${element.email}]</option>`;
          });
          
            document.getElementById("loader1").style.visibility = "hidden";
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) { 
          var msg = JSON.parse( XMLHttpRequest.responseText);
          document.getElementById("loader1").style.visibility = "hidden";
        // alert("Status: " + textStatus); alert("Error: " + errorThrown); 
    },
    });
 </script>