<div class="col-12">

 <div class="col-12 my-5">
    <form id="add_course_form">

        <div class="mb-3">
            <label for="sname" class="form-label">Course Name</label>
            <input type="text" name="name" class="form-control" id="sname">
          </div>
        <!-- <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Student Email address</label>
          <input type="email" name="email" class="form-control" id="exampleInputEmail1">
        </div>
        <div class="mb-3">
          <label for="exampleInputPassword1" class="form-label">Password</label>
          <input type="password" name="password" class="form-control" id="exampleInputPassword1">
        </div> -->
        <!-- <div class="mb-3">
            <label for="disabledSelect" class="form-label">Course</label>
            <select id="disabledSelect" class="form-control">
              <option selected>Select Course</option>
            </select>
          </div> -->
        <button type="submit" class="btn btn-primary">Create</button>
      </form>
 </div>
 <hr>
 <h3 class="text-center my-5">Courses List</h3>
 <div class="col-12 my-5 ">
   
  <table class="table table-striped" style="color: white !important;">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Course Name</th>
        <th scope="col">Created at</th>
      </tr>
    </thead>
    <tbody id="course_list">
      
    </tbody>
  </table>
 </div>
</div>

 <script>
   var i = 0;
   function convertToEST(timestamp) {
  const date = new Date(timestamp);

  // Specify the timezone as 'America/New_York' for Eastern Standard Time
  const options = {
    timeZone: 'America/New_York',
    year: 'numeric',
    month: 'numeric',
    day: 'numeric',
    hour: 'numeric',
    minute: 'numeric',
    second: 'numeric',
  };

  // Format the date in EST
  const estDateTime = new Intl.DateTimeFormat('en-US', options).format(date);

  return estDateTime;
}
var estDateTime;
   $.ajax({
        type: "get",
        contentType: "application/json",
        url: `${baseurl}/get-courses-whole-list`,
        success: function (result) {
          // console.log(result)
          
          result.forEach(element => {
            estDateTime = convertToEST(element.created_at);
            document.getElementById("course_list").innerHTML += `<tr>
        <th scope="row">${++i}</th>
        <td>${element.cname}</td>
        <td>${estDateTime}</td>
      </tr>`;
          });
          
            document.getElementById("loader1").style.visibility = "hidden";
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) { 
          var msg = JSON.parse( XMLHttpRequest.responseText);
          document.getElementById("loader1").style.visibility = "hidden";
        // alert("Status: " + textStatus); alert("Error: " + errorThrown); 
    },
    });
         var request;

$("#add_course_form").submit(function (event) {
// alert(document.getElementById("imagesuploadform").value);
    // Prevent default posting of form - put here to work in case of errors
    event.preventDefault();

    // Abort any pending request
    if (request) {
        request.abort();
    }
    // setup some local variables
    // var formData = new FormData(this);
    var name = $("#sname").val();
    // var email = $("#exampleInputEmail1").val();
    // var pass = $("#exampleInputPassword1").val();
    
    // var dateFormat= new Date();
    // formData.append("sender_id", user_ida);
    // msgarea
    // var messaga = document.getElementById("msgarea").value;
    // console.log(formData)
    document.getElementById("loader1").style.visibility = "visible";
    var data = JSON.stringify({
      cname: name
  })
    $.ajax({
        type: "post",
        data: data,
        contentType: "application/json",
        url: `${baseurl}/course-registration`,
        success: function (result) {
          Swal.fire({
                                  icon: 'success',
                                  title: 'Successful!',
                                  text: result.message,
                                  allowOutsideClick: false
                                })
                                $( 'button.swal2-confirm' ).click(function() {
                                  location.reload();
                                });
            document.getElementById("loader1").style.visibility = "hidden";
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) { 
          var msg = JSON.parse( XMLHttpRequest.responseText);
          Swal.fire({
                                  icon: 'error',
                                  title: 'Failed!',
                                  text: msg.message,
                                })

          document.getElementById("loader1").style.visibility = "hidden";
        // alert("Status: " + textStatus); alert("Error: " + errorThrown); 
    },
    });
});
 </script>